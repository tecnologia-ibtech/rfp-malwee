---
layout: topic
---

## T-17 - Cofre de Senhas ou Solução Segura

### Pergunta
O fornecedor utiliza cofre de senhas ou solução segura para segredos e dados sensíveis?

### Resposta

A gestão segura de credenciais, chaves de API, certificados e outros segredos é crítica para a segurança operacional. Segredos mal gerenciados - no código-fonte, armazenados em texto claro, compartilhados inseguramente - são vetores frequentes de comprometimento.

#### Natureza de Segredos em Aplicações Modernas

Aplicações empresariais manipulam diversos tipos de segredos. Credenciais de banco de dados permitem acesso aos repositórios de dados. Chaves de API para serviços externos - provedores de pagamento, serviços de geolocalização, integrações com ERPs - autenticam comunicações. Certificados SSL/TLS habilitam comunicação criptografada. Chaves de criptografia protegem dados sensíveis em repouso.

A proliferação de segredos aumenta com complexidade de arquitetura. Microsserviços que comunicam através de APIs protegidas, integrações com múltiplos sistemas de terceiros, utilização de diversos serviços de nuvem, cada componente pode requerer seu próprio conjunto de credenciais e chaves.

O ciclo de vida de segredos - criação, distribuição, rotação, revogação - requer gestão cuidadosa. Segredos devem ser únicos por ambiente (desenvolvimento, teste, produção) para limitar impacto de exposição. Rotação periódica reduz janela de oportunidade caso segredo seja comprometido. Revogação imediata quando funcionário com acesso deixa organização ou quando comprometimento é suspeito.

#### Práticas de Gestão de Segredos Identificadas

A plataforma utiliza diversos tipos de segredos para suas operações. Credenciais de acesso a bancos de dados, chaves para integração com APIs de sistemas externos, configurações de serviços de email, tokens de autenticação para serviços de nuvem são exemplos de informações sensíveis necessárias para operação.

Estes segredos são configurados através de variáveis de ambiente ou arquivos de configuração externos ao código-fonte da aplicação. Esta prática é superior a hardcoding de credenciais diretamente no código, que resulta em exposição através de sistemas de controle de versão e dificulta rotação de credenciais.

A utilização de variáveis de ambiente permite diferenciação de configurações por ambiente de implantação, garantindo que ambientes de desenvolvimento e teste utilizem credenciais distintas de produção. Esta separação é fundamental para minimizar risco de acesso acidental ou malicioso a dados produtivos durante atividades de desenvolvimento.

#### Limitações na Gestão Centralizada de Segredos

A plataforma, em seu estado atual, não implementa utilização de cofre de senhas dedicado ou sistema especializado de gestão de segredos como HashiCorp Vault, AWS Secrets Manager, Azure Key Vault ou similares. Estes sistemas fornecem funcionalidades avançadas de gestão de ciclo de vida de segredos, auditoria de acessos, rotação automática e controles granulares de permissão.

Na ausência de cofre de senhas centralizado, segredos residem em arquivos de configuração ou variáveis de ambiente dos servidores de aplicação. Embora não estejam em código-fonte, o acesso a estes arquivos ou variáveis por administradores de sistema ou processos maliciosos pode expor segredos.

A rotação de segredos requer processo manual de modificação de configurações e reinicialização de aplicações. Cofres de senhas modernos permitem rotação automática de credenciais sem intervenção manual e sem downtime de aplicações, além de notificação proativa sobre segredos próximos de expiração.

A auditoria de acesso a segredos - quem acessou qual credencial em qual momento - é limitada quando segredos residem em arquivos de configuração. Cofres de senhas especializados mantêm logs detalhados de todos acessos a segredos, facilitando investigações de segurança e atendimento a requisitos de compliance.

#### Criptografia de Segredos em Repouso

Mesmo quando segredos não residem em cofre centralizado, boas práticas incluem criptografia de arquivos de configuração que contêm credenciais. Esta criptografia impede que acesso não autorizado ao sistema de arquivos resulte imediatamente em exposição de credenciais em texto claro.

A gestão de chaves de criptografia para estes arquivos apresenta desafio tipo "chicken and egg" - a chave de criptografia é ela própria um segredo que precisa ser protegido. Soluções incluem armazenamento de chaves em hardware security modules (HSMs), derivação de chaves de criptografia a partir de secrets gerenciados pela plataforma de hospedagem, ou utilização de mecanismos de unsealing durante inicialização de aplicações.

#### Controles de Acesso a Segredos

O acesso a segredos deve seguir princípio de menor privilégio. Apenas processos e indivíduos que genuinamente necessitam de acesso específico a segredo devem possuí-lo. Em ambientes com múltiplos administradores, segregação de acesso garante que comprometimento de uma conta não exponha todos segredos.

Procedimentos operacionais devem minimizar necessidade de humanos visualizarem segredos. Processos automatizados de deploy que injetam credenciais diretamente de cofres ou gerenciadores de configuração para ambientes de execução eliminam necessidade de administradores conhecerem valores reais de senhas.

Quando visualização manual de segredos é necessária, registro de auditoria deve documentar quem acessou, quando e idealmente justificativa. Este registro serve tanto para detecção de acessos não autorizados quanto para investigações após incidentes onde credenciais podem ter sido comprometidas.

#### Recomendações para Evolução de Gestão de Segredos

A adoção de cofre de senhas especializado representaria evolução significativa em postura de segurança da plataforma. Soluções modernas oferecem APIs que permitem aplicações recuperarem segredos dinamicamente em tempo de execução, eliminando necessidade de armazenamento local de credenciais.

Integração com provedores de identidade e sistemas de autenticação permite que cofres de senhas apliquem controles de acesso baseados em identidade federada, multi-fator authentication e políticas organizacionais. A combinação de cofre de senhas com práticas de rotação automática de credenciais reduz significativamente janela de oportunidade para exploração de credenciais comprometidas.

Cofres de senhas também facilitam conformidade com regulamentações que requerem criptografia de dados sensíveis, controles de acesso rigorosos e auditoria completa de acessos a informações confidenciais. Relatórios de compliance gerados automaticamente por cofres reduzem esforço de demonstração de conformidade durante auditorias.