---
layout: topic
---

## T-05 - Operação Offline

### Pergunta
Descreva tecnicamente como funciona o modo offline (item 7.0 da Aba 2). Qual tecnologia é usada (PWA, App Nativo)? Como é o banco de dados local? Como é feito o tratamento de conflitos de sincronização (ex: pedido offline de item sem estoque)? Como o saldo é atualizado? Como é feita a carga inicial de dados (catálogo, clientes, políticas) para o modo offline (em tablets/iPads)? Como é feita a sincronização dos pedidos digitados offline quando a conexão é restabelecida? Como o sistema trata conflitos (ex: pedido offline de um item que ficou sem estoque)?

### Resposta

A plataforma Geovendas atualmente opera em modelo exclusivamente online, requerendo conectividade contínua com os servidores para todas as operações de navegação de catálogo, consulta de preços, verificação de estoque e criação de pedidos.

#### Estado Atual da Arquitetura

A plataforma foi desenvolvida utilizando arquitetura web tradicional cliente-servidor, onde o frontend executa no navegador e todas as operações de leitura e escrita de dados são realizadas através de requisições síncronas ao backend. Esta arquitetura foi apropriada para os requisitos iniciais do produto e continua atendendo adequadamente clientes cujas equipes de vendas operam em ambientes com conectividade confiável, como escritórios, showrooms e situações de vendas presenciais em locais com infraestrutura de rede.

O sistema não implementa atualmente tecnologias de Progressive Web App (PWA) como Service Workers para cache de recursos estáticos e dinâmicos, IndexedDB ou LocalStorage para persistência local de dados mestres e transacionais, APIs de sincronização em background, ou mecanismos de detecção de conectividade com fallback automático para modo offline. Consequentemente, quando a conectividade de rede é perdida, o sistema não pode operar e os usuários não podem realizar consultas de catálogo ou criação de pedidos.

#### Considerações Técnicas para Implementação Futura

Embora a funcionalidade offline não esteja disponível atualmente, a arquitetura da plataforma poderia evoluir para suportar este modelo operacional através da adoção de tecnologias modernas de desenvolvimento web. Uma implementação de modo offline robusto requereria investimentos significativos em diferentes camadas da stack tecnológica.

A abordagem mais adequada provavelmente seria a criação de uma Progressive Web App que manteria compatibilidade com o acesso via navegadores web enquanto adicionaria capacidades offline. Esta PWA implementaria Service Workers para interceptar requisições de rede e servir respostas de cache quando offline, além de gerenciar sincronização em background quando conectividade fosse restabelecida.

Para armazenamento local de dados, tecnologias como IndexedDB proporcionariam banco de dados no navegador capaz de armazenar volumes significativos de informação estruturada. Este banco local precisaria ser pré-populado com catálogo de produtos completo incluindo imagens e especificações técnicas, dados de clientes atribuídos ao representante com condições comerciais específicas, tabelas de preços aplicáveis, snapshot de estoque disponível no momento da última sincronização, e políticas comerciais e regras de negócio necessárias para validações locais.

#### Desafios de Sincronização e Consistência

Um dos aspectos mais complexos de operação offline é o tratamento de sincronização e resolução de conflitos quando conectividade é restabelecida. Pedidos criados offline precisariam ser enfileirados localmente e transmitidos ao servidor assim que conexão estivesse disponível. Entretanto, o intervalo de tempo entre criação offline e sincronização cria janela onde dados podem ter mudado no servidor, especialmente estoque disponível e preços.

Estratégias de resolução de conflito precisariam ser definidas para cenários como pedido offline de item que ficou sem estoque durante o período offline, alterações de preço que tornaram valores registrados offline desatualizados, clientes que atingiram limite de crédito após pedido offline ser criado, e produtos que foram descontinuados ou tiveram atributos alterados. Diferentes políticas poderiam ser aplicadas dependendo do contexto de negócio: validação no momento da sincronização com possível rejeição automática de pedidos que não atendam critérios atualizados, sinalização para revisão manual de pedidos com conflitos potenciais antes de integração com ERP, ou aceitação otimista com ajustes posteriores no processo de faturamento.

#### Experiência do Usuário em Cenário Offline

Uma implementação de qualidade de modo offline precisaria proporcionar feedback claro ao usuário sobre seu estado de conectividade. Indicadores visuais mostrariam quando o sistema está operando offline, quantos pedidos estão pendentes de sincronização, e quando última atualização de dados mestres ocorreu. Usuários precisariam compreender que informações como estoque podem estar desatualizadas em modo offline.

A carga inicial de dados para modo offline em dispositivos novos ou após limpeza de cache seria processo significativo dado o volume de informação necessária. Um catálogo de produtos pode incluir milhares de SKUs com imagens, descrições e especificações técnicas. Mecanismos de download progressivo e compressão seriam necessários para tornar esta carga inicial viável, especialmente em conexões móveis com limitações de largura de banda.

#### Aplicações Nativas como Alternativa

Uma abordagem alternativa à PWA seria desenvolvimento de aplicações nativas para iOS e Android utilizando frameworks de desenvolvimento cross-platform. Apps nativos proporcionariam melhor controle sobre armazenamento local, sincronização em background, e experiência de usuário otimizada para dispositivos móveis. Entretanto, esta abordagem implicaria em manutenção de codebase adicional e distribuição através de app stores, aumentando complexidade e custos de desenvolvimento e operação.

#### Estado Atual e Roadmap

A ausência de funcionalidades offline no estado atual do produto não representa limitação crítica para muitos cenários de uso, especialmente considerando a crescente disponibilidade de conectividade móvel através de redes 4G e 5G. Muitos clientes da plataforma operam satisfatoriamente com modelo online, utilizando tablets e dispositivos móveis com conectividade celular confiável.

Para organizações cujo modelo operacional requer capacidade offline - por exemplo, representantes que atuam em regiões com cobertura de rede limitada, operações em feiras e eventos onde conectividade pode ser instável, ou cenários internacionais onde roaming de dados é proibitivo - esta seria uma limitação a ser considerada na avaliação da plataforma. Alternativamente, estes cenários podem ser atendidos através de processos híbridos, onde pedidos são registrados em ferramentas offline simples (planilhas, formulários) e posteriormente digitados no sistema quando conectividade está disponível.

A evolução para suportar cenários offline seria tecnicamente viável através de adoção de tecnologias modernas como PWA, mas representaria investimento significativo de desenvolvimento que precisaria ser justificado por requisitos de negócio específicos das organizações.