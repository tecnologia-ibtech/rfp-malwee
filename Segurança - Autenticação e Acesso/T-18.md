## T-18 - Controles de Acesso Granulares

### Pergunta
O sistema permite controles de acesso granulares (ex.: Admin, DEV, Visualizador)?

### Resposta

Controles de acesso granulares constituem fundamento de princípio de menor privilégio, onde cada usuário possui exatamente as permissões necessárias para suas responsabilidades, não mais nem menos. A granularidade de controles impacta diretamente segurança, auditabilidade e conformidade com políticas corporativas.

#### Modelo de Controle de Acesso Implementado

A plataforma implementa sistema de perfis de usuário com permissões associadas que determinam funcionalidades acessíveis e operações permitidas. Esta arquitetura permite diferenciação entre categorias amplas de usuários - administradores de sistema, operadores de negócio, representantes comerciais, clientes finais - cada um com visibilidades e capacidades apropriadas.

O controle de acesso opera em múltiplas camadas da aplicação. A camada de autenticação valida identidade do usuário. A camada de autorização verifica se aquele usuário específico, dado seu perfil, tem permissão para acessar recurso ou executar operação solicitada. Controles em nível de interface ocultam funcionalidades não autorizadas, enquanto validações server-side impedem bypass através de manipulação de requisições.

A persistência de informações sobre perfis e permissões no banco de dados permite gestão centralizada e modificações sem necessidade de redeployment de código. Administradores podem criar novos perfis, modificar permissões de perfis existentes, e associar usuários a perfis apropriados através de interfaces administrativas.

#### Níveis de Granularidade Disponíveis

O sistema oferece diferenciação em níveis funcionais amplos - módulos completos de funcionalidade podem ser habilitados ou desabilitados por perfil. Por exemplo, acesso a funcionalidades de configuração de regras de negócio, gestão de catálogo de produtos, ou relatórios financeiros pode ser restrito a perfis administrativos específicos.

Dentro de módulos funcionais, granularidade adicional pode existir em nível de operações específicas. Visualização de informações (leitura) versus capacidade de modificação (escrita) pode ser diferenciada. Aprovação de transações que excedem valores específicos pode requerer perfis com autoridade apropriada.

A visibilidade de dados pode ser controlada por perfil. Representantes comerciais visualizam apenas clientes de suas carteiras, não todo universo de clientes. Administradores regionais visualizam operações de suas regiões. Administradores corporativos têm visão consolidada. Este controle de escopo de dados previne exposição desnecessária de informações.

#### Perfis Típicos Implementados

Perfis administrativos possuem acesso amplo a configurações de sistema, gestão de usuários, definição de regras de negócio e acesso a funcionalidades sensíveis. Estes perfis são atribuídos a indivíduos de confiança dentro da organização com responsabilidades de gestão da plataforma.

Perfis operacionais têm acesso a funcionalidades diárias de negócio - processamento de pedidos, gestão de estoques, atendimento a clientes - sem acesso a configurações estruturais do sistema. A segregação entre perfis operacionais e administrativos implementa separação de responsabilidades que previne erros acidentais e dificulta fraudes.

Perfis de representantes comerciais têm acesso a funcionalidades de vendas, visualização de catálogos, consulta de preços e criação de pedidos, limitados à sua carteira de clientes e políticas comerciais aplicáveis. Perfis de clientes finais em portal B2B têm acesso ainda mais restrito, visualizando apenas informações de sua própria organização e poderes de realizar pedidos conforme limites de crédito e políticas estabelecidas.

#### Gestão de Perfis e Atribuição a Usuários

A criação e manutenção de perfis é realizada por administradores do sistema através de interfaces dedicadas. A flexibilidade de criar perfis customizados além de perfis predefinidos permite adaptação a estruturas organizacionais específicas de cada cliente.

A atribuição de usuários a perfis pode seguir diferentes modelos. Atribuição individual onde administrador explicitamente define perfil de cada usuário oferece controle máximo mas pode ser trabalhosa em organizações grandes. Atribuição baseada em regras ou atributos de usuário (departamento, nível hierárquico, localização) permite gestão escalável.

Modificações de perfis de usuário - atribuição inicial, alterações durante mudanças de função, revogação após desligamento - devem seguir processos formais com aprovações apropriadas. Logs de auditoria de mudanças em perfis e permissões facilitam investigações de acessos não autorizados e demonstração de conformidade com políticas.

#### Validação e Enforcement de Permissões

A validação de permissões ocorre tanto em camada de apresentação quanto em camada de lógica de negócio. Na interface de usuário, elementos correspondentes a funcionalidades não autorizadas são ocultados ou desabilitados, melhorando experiência do usuário ao não expor opções indisponíveis.

No entanto, controles de interface podem ser bypassados por usuários técnicos manipulando requisições HTTP diretamente. A validação definitiva de autorização deve ocorrer no servidor, onde cada operação solicitada é verificada contra permissões do usuário autenticado antes de execução. Esta abordagem de defesa em profundidade garante segurança mesmo quando controles client-side são comprometidos.

Operações particularmente sensíveis - modificação de configurações críticas, acesso a dados financeiros, aprovação de transações de alto valor - podem requerer reautenticação ou aprovação por segundo usuário (dual control), adicionando camada extra de segurança além de simples verificação de perfil.

#### Auditoria e Rastreabilidade de Acessos

Logs de auditoria registram não apenas acessos bem-sucedidos, mas também tentativas de acesso a funcionalidades não autorizadas. Padrões de tentativas de acesso não autorizado podem indicar usuários tentando exceder suas permissões ou contas comprometidas sendo utilizadas para reconhecimento.

A rastreabilidade de quem realizou qual ação, quando e de onde é fundamental para investigações de incidentes e responsabilização. Logs incluem identificação de usuário, perfil que estava ativo, operação tentada ou executada, timestamp e endereço IP de origem.

Relatórios de utilização por perfil fornecem insights sobre padrões de acesso e podem identificar perfis com permissões excessivas raramente utilizadas (candidatos para refinamento conforme princípio de menor privilégio) ou perfis com permissões insuficientes resultando em frequentes solicitações de elevação de privilégio.

#### Limitações e Áreas de Evolução

A granularidade de controles, embora funcional para necessidades típicas, pode não atender cenários corporativos extremamente complexos que requerem controle em nível de campo individual de formulários ou condições dinâmicas baseadas em atributos contextuais além de simples perfil de usuário.

Modelos mais sofisticados como RBAC (Role-Based Access Control) com suporte a hierarquias de roles e herança de permissões, ou ABAC (Attribute-Based Access Control) onde decisões de acesso consideram múltiplos atributos de usuário, recurso e contexto, representariam evolução para cenários de autorização altamente complexos.

A gestão de ciclo de vida completo de identidades e acessos, incluindo workflows de aprovação para solicitações de acesso, revisões periódicas de permissões, detecção de anomalias em padrões de acesso e integração com sistemas corporativos de gestão de identidade (IAM), são capacidades de sistemas enterprise maduros que podem não estar completamente implementadas.