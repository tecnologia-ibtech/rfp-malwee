## T-07 - Autenticação Multifator (MFA)

### Pergunta
O sistema oferece autenticação multifator (MFA) para todos os perfis, incluindo administradores?

### Resposta

O sistema de autenticação atual da plataforma utiliza mecanismos tradicionais baseados em sessão com validação de credenciais armazenadas de forma segura no banco de dados. A arquitetura de autenticação está estruturada em múltiplas camadas, refletindo a natureza modular da solução.

#### Modelo de Autenticação Atual

Na camada de integração com sistemas externos, especificamente na comunicação com o ERP corporativo, a plataforma implementa autenticação moderna baseada em tokens OAuth 2.0. Este protocolo de autorização fornece acesso seguro às APIs do sistema de origem sem exposição de credenciais, utilizando tokens de acesso com tempo de vida limitado e mecanismos de renovação automática. Este modelo garante que as integrações críticas de negócio operem com elevado nível de segurança, isolamento de credenciais e rastreabilidade completa de acessos.

No módulo de back-office, utilizado pela equipe administrativa e de operações, o sistema implementa autenticação baseada em sessão com controle granular de perfis de acesso. O framework de aplicação gerencia o ciclo de vida das sessões, incluindo timeouts configuráveis, invalidação manual e controle de sessões concorrentes. A estrutura de permissões permite definir quais funcionalidades cada perfil pode acessar, desde operações de leitura até operações críticas de modificação de dados mestres e configurações.

No portal de vendas voltado para clientes finais e representantes comerciais, a autenticação também segue o modelo baseado em sessão, com particularidades específicas para o contexto B2B. O sistema diferencia perfis de representantes, clientes corporativos e administradores de loja, cada um com suas respectivas permissões e visibilidades de dados. A validação de credenciais inclui verificações de status de conta, bloqueios por tentativas inválidas e controle de acessos simultâneos.

#### Limitações Identificadas - Autenticação Multifator

A plataforma, em seu estado atual, não possui implementação nativa de autenticação multifator (MFA) para os perfis de usuário do sistema. Este recurso de segurança adicional, que adiciona uma segunda camada de verificação além da senha tradicional, não está disponível nos módulos de back-office nem no portal B2B. A autenticação se limita ao modelo de usuário e senha, sem solicitação de código adicional via SMS, aplicativo autenticador ou token de hardware.

Esta ausência representa uma lacuna em relação às práticas modernas de segurança, especialmente considerando que administradores do sistema têm acesso privilegiado a configurações críticas, dados sensíveis de clientes e funcionalidades de modificação de regras de negócio. Da mesma forma, representantes comerciais que acessam informações confidenciais de carteira de clientes, precificação e histórico de pedidos poderiam se beneficiar de proteção adicional contra comprometimento de credenciais.

#### Controles de Segurança Existentes

Embora o MFA não esteja implementado, o sistema possui outros mecanismos de segurança que contribuem para a proteção de acessos não autorizados. O bloqueio automático de conta após tentativas sucessivas de login inválidas impede ataques de força bruta. Os logs de auditoria registram todas as tentativas de acesso, incluindo sucessos e falhas, com informações de origem (endereço IP, timestamp e identificação do usuário). O controle de sessões permite que administradores identifiquem e invalidem sessões ativas de usuários, útil em casos de suspeita de comprometimento de conta.

A camada de aplicação implementa proteção contra ataques comuns como CSRF (Cross-Site Request Forgery) através de tokens de validação em formulários críticos. As sessões possuem identificadores únicos gerados de forma aleatória e imprevisível, dificultando ataques de sequestro de sessão. O timeout automático de inatividade força reautenticação após períodos sem interação, reduzindo o risco de acesso indevido em dispositivos deixados desbloqueados.

#### Considerações sobre Implementação Futura de MFA

A implementação de autenticação multifator representaria uma evolução significativa na postura de segurança da plataforma. A arquitetura modular do sistema permitiria a adição deste recurso através de uma camada intermediária de autenticação, sem necessidade de refatoração massiva do código existente. Uma abordagem comum seria a implementação de TOTP (Time-based One-Time Password), compatível com aplicativos autenticadores populares, ou integração com serviços especializados de MFA que oferecem múltiplos métodos de verificação (SMS, push notifications, biometria).

A adoção de MFA poderia ser implementada de forma gradual e configurável, permitindo que cada cliente defina suas próprias políticas de segurança. Por exemplo, tornar o segundo fator obrigatório apenas para administradores e opcional para demais usuários, ou exigir MFA apenas para acessos originados de fora de redes corporativas confiáveis. Esta flexibilidade é importante para balancear segurança e experiência do usuário, especialmente em contextos B2B onde representantes em campo podem ter conectividade limitada.